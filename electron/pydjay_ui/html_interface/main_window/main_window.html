<!DOCTYPE html>
<title>PYMUSIC DJ App</title>

<link rel="stylesheet" href="main_window.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet"> -->


<script src="../../../web-audio/event_dispatcher.js"></script>
<script src="../../../web-audio/audio_context.js"></script>
<script src="../../../web-audio/audio_player.js"></script>
<script src="../../../web-audio/audio_player_base.js"></script>
<script src="../../../web-audio/audio_player_buffer.js"></script>
<script src="../../../web-audio/audio_player_file.js"></script>
<script src="../../../web-audio/mp3_fileinfo.js"></script>

<script src="../jui/core/lib/jquery-1.8.0.min.js"></script>
<script src="../jui/core/dist/core.min.js"></script>
<script src="../jui/ui/dist/ui.min.js"></script>
<script src="../jui/grid/dist/grid.min.js"></script>

<script src="../lib/moment.min.js"></script>
<script src="../lib/Sortable.js"></script>

<script src="../../utils.js"></script>
<script src="../../sql.js"></script>
<script src="../../data.js"></script>
<script src="../../controllers/queue_controller.js"></script>
<script src="../../controllers/session_controller.js"></script>
<script src="../../controllers/playback_controller.js"></script>
<script src="../../controllers/track_list_controller.js"></script>
<script src="../../controllers/playlists_controller.js"></script>
<script src="../../controllers/sessions_controller.js"></script>

<script src="views/queue_view.js"></script>
<script src="views/main_player_view.js"></script>
<script src="views/track_list_view.js"></script>
<script src="views/playlists_view.js"></script>
<script src="views/sessions_view.js"></script>


<body class="jui" style="margin: 0px; padding:0px; height:100%">
    <div class="header">
        <div class="item">
            <button class="settings-button"><i class="fas fa-ellipsis-v"></i></button>
        </div>
        <div class="content">
            <div  class="item"></div>
            <div  class="item">
                <span style="font-size:13px; color:rgb(150,150,150)"><b>DJ</b></span>
            </div>
            <div  class="item"></div>            
        </div>
    </div>
    <div class="main_player">
        <img id="main-player-track-cover" class="cover" src="test_cover.png" height="150" width="150"></img>
        <div style="float:left; display:block; width:calc(100% - 150px)">
            <div style="padding-left:5px; float:left; width:100%; display:block; height:70px">
                <div style="display:inline-block; width:calc(100% - 150px)">
                    <h1 id="main-player-track-title" class="title">Arkansas Blues</h1>
                    <h2 class="artist"><strong id="main-player-track-album">Norbert Susemihl - Night On Frenchman Street</strong> 
                        &nbsp;&nbsp;|&nbsp;&nbsp;
                        <em id="main-player-track-artist">(Norbert Susemihl, Jason Marsalis, Kerry Lewis)</em> </h2>        
                </div>
                <div style="padding-right:10px; position:absolute; right:0px; display:inline-block"><h1 id="main-player-time-remaining" class="time_remaining">-3:34</h1></div>            
            </div>
            <div class="track-info"> 
                <div class="info">
                    <div class="title">DURATION</div>
                    <div id="main-player-track-duration" class="value">3:12</div>
                </div>
                <div class="info">
                    <div class="title">BPM</div>
                    <div id="main-player-track-bpm" class="value">120</div>
                </div>
                <div class="rating">
                    <div id="main-player-rating" class="value"></div>
                </div>
                <div class="rating">
                    <div id="main-player-loved" class="value">
                        <i class="fa fa-heart"></i> 
                    </div>
                </div>
            </div>
            <div id="main-player-waveform" class="waveform"></div>
        </div>
    </div>
    <div class="main_space">
        <div class="side_bar">
            <button class="accordion">Library</button>
            <div class="panel">
                <ul class="sidebar-library">
                    <li class="sidebar-library-item" onclick="display_all_songs()">
                        <i class="fa fa-database list-icon"></i>
                        All songs
                        <i class="fa fa-angle-right arrow-icon"></i> 
                    </li>
                    <li class="sidebar-library-item" onclick="display_suggestions()">
                        <i class="fa fa-smile-o list-icon"></i>
                        Suggestions
                        <i class="fa fa-angle-right arrow-icon"></i> 
                    </li>
                    <li class="sidebar-library-item" onclick="display_short_list()">
                        <i class="fa fa-circle-o list-icon"></i>
                        Short list
                        <i class="fa fa-angle-right arrow-icon"></i> 
                    </li>
                    <li class="sidebar-library-item" onclick="display_played_tracks()">
                        <i class="fa fa-circle-o list-icon"></i>
                        Played songs
                        <i class="fa fa-angle-right arrow-icon"></i> 
                    </li>
                    <li class="sidebar-library-item" onclick="display_never_played_tracks()">
                        <i class="fa fa-circle-o list-icon"></i>
                        Never played
                        <i class="fa fa-angle-right arrow-icon"></i> 
                    </li>
                    <li class="sidebar-library-item" onclick="display_unavailable()">
                        <i class="fa fa-circle-o list-icon"></i>
                        Unavailable
                        <i class="fa fa-angle-right arrow-icon"></i> 
                    </li>
                </ul>
            </div>
            
            <button class="accordion open-on-drag-over">
                Playlists
                <div class="action-button-group">
                    <i class="fa fa-plus action-icon"></i>        
                    <i class="fa fa-refresh action-icon"></i>
                </div>

            </button>
            <div class="panel">
                <div style="overflow-y:auto; max-height:350px">
                    <table id="playlist-list-elements">
                        <tbody></tbody>
                    </table>
                    <script data-jui="#playlist-list-elements" data-tpl="row" type="text/template">
                        <tr class="choice track-drop-target" style="height:20px; margin-left:10px" onclick=display_playlist(<!= id !>)>
                            <td style="width:10px"></td>
                            <td style="width:25px"><i class="fa fa-circle-o  arrow-icon"></i></td>
                            <td style="width:300px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><!= name !></td>
                            <td style="width:25px"><i class="fa fa-angle-right arrow-icon"></i></td>
                        </tr>
                    </script>
        
                </div>
            </div>            
            <button class="accordion" style="margin-right:0">
                Sessions
                <div class="action-button-group">
                    <i class="fa fa-refresh action-icon"></i>
                </div>
                </button>
            <div class="panel">
                <div style="overflow-y:auto; max-height:350px">
                    <table id="session-list-elements">
                        <tbody></tbody>
                    </table>
                    <script data-jui="#session-list-elements" data-tpl="row" type="text/template">
                        <tr class="choice" style="height:20px; margin-left:10px" onclick=display_session(<!= id !>)>
                            <td style="width:10px"></td>
                            <td style="width:25px"><i class="fa fa-circle-o arrow-icon"></i></td>
                            <td style="width:200px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><!= name !></td>
                            <td style="width:100px; color:rgb(128,128,128)"><!= date !></td>
                            <td style="width:25px"><i class="fa fa-angle-right arrow-icon"></i></td>
                        </tr>
                    </script>
        
                </div>
            </div>
            <button class="accordion open-on-drag-over">Preview Player</button>
            <div class="panel">
                <div class="preview-player">
                    <img class="cover" src="test_cover.png" height="75" width="75"></img>
                    <div>
                        PLAYER
                    </div>
                    <div style="float:left; display:block; width:calc(100% - 50px)">
                        <div style="padding-left:5px; float:left; width:100%; display:block; height:70px">
                            <div style="display:inline-block; width:100%">
                                <h1 class="title">Arkansas Blues</h1>
                                <h2 class="artist">Norbert Susemihl, Jason Marsalis, Kerry Lewis</h2>     
                            </div>
                        </div>
                    </div>
                    <table style="width:300px">
                        <tr class="metadata"> 
                            <td class="tag-name"><b>Album:</b></td> 
                            <td class="tag-value">NORBERT SUSEMIHL - NIGHT ON FRENCHMAN STREET</td> 
                        </tr> 
                        <tr class="metadata"> 
                            <td class="tag-name"><b>Genre:</b></td> 
                            <td class="tag-value">Jazz</td> 
                        </tr> 
                        <tr class="metadata"> 
                            <td class="tag-name"><b>Year:</b></td> 
                            <td class="tag-value">2012</td> 
                        </tr> 
                        <tr class="metadata"> 
                            <td class="tag-name"><b>Length:</b></td> 
                            <td class="tag-value">3:45</td> 
                        </tr>     
                        <tr class="metadata"> 
                            <td class="tag-name"><b>Last played:</b></td> 
                            <td class="tag-value">2018-03-04</td> 
                        </tr> 
                        <tr class="metadata"> 
                            <td class="tag-name"><b>Play count:</b></td> 
                            <td class="tag-value">12</td> 
                        </tr> 
                    </table>
                </div>
            </div>
        </div>
        <div class="main_list">
            <div class="main-list-header">
                <div class="title">
                    <div class="name" id="main-track-list-name">
                        ALL SONGS
                    </div>
                    <div class="count" style="margin-top:4px">
                        <div class="count" style="margin-top:4px">
                            <div id="main-track-list-number-of-tracks" style="display:inline-block">15 tracks</div> - <div id="main-track-list-duration" style="display:inline-block">57 minutes 37 seconds</div>
                        </div>
                    </div>
                </div>
                <div class="search-container">
                    <button type="submit" class="search-submit-button"><i class="fa fa-search"></i></button>
                    <input type="text" placeholder="Filter list..." name="search">
                </div>
              
            </div>
            <div class="main-track-list-area">
                <table class="main-track-list-table" id="track-list-elements">
                    <thead style="border:0px solid transparent; margin:0; padding:0">
                        <tr class="header-row">
                            <th class="sticky-header"><b><i class='fa fa-heart' style='font-size: 12px'/></b></th>
                            <th class="sticky-header">Title</th>
                            <th class="sticky-header">Artist</th>
                            <th class="sticky-header">Genre</th>
                            <th class="sticky-header"><b><span class='fa fa-play'/></b></th>
                            <th class="sticky-header"><b><span class='fa fa-calendar' style='font-size: 15px'/></b></th>
                            <th class="sticky-header">Rating</th>
                            <th class="sticky-header"><b style='font-size: 13px'><span class='fa fa-heartbeat' style='font-size: 15px'/></b></th>
                            <th class="sticky-header" style="text-align:right">Time</th>
                            <th class="sticky-header"></th>
                        </tr>
                    </thead>
                    <tbody id="main-elements-body" class="list-group"></tbody>
                </table>
            
            </div>
            <script data-jui="#track-list-elements" data-tpl="row" type="text/template">
                <tr class="list-group-item row track-entry" draggable=true>
                    <td style="width:25px; padding:5px 3px 5px 3px; text-align:center; font-size:8pt"><!= loved !></td>
                    <td style="max-width:125px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><!= title !></td>
                    <td style="max-width:115px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><!= artist !></td>
                    <td style="max-width:40px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"><!= genre !></td>
                    <td style="text-align:right; width:25px; padding-right:9px"><!= play_count !></td>
                    <td style="width:75px"><!= last_played !></td>
                    <td style="width:25px"><!= rating !></td>
                    <td style="width:30px; text-align:right; padding-right:5px"><!= bpm !></td>
                    <td style="width:45px; text-align:right"><!= duration !></td>
                    <td style="width:15px"></td>
                </tr>
            </script>
    </div>
        <div class="queue_list">
            <div class="main-list-header">
                <div class="title">
                    <div class="name">
                        QUEUE
                    </div>
                    <div class="count" style="margin-top:4px">
                        <div id="queue-number-of-tracks" style="display:inline-block">15 tracks</div> - <div id="queue-duration" style="display:inline-block">57 minutes 37 seconds</div>
                    </div>
                </div>
                <button class="queue-management-button"><i class="fa fa-ellipsis-h"></i></button>
                <button id="queue-start-button" class="queue-management-button" onclick="mpc.start_queue()"><i class="fa fa-play"></i></button>
            </div>
            <div class="queue-list">
                <table id="queue-list-elements" style="width:100%">
                    <thead style="width:100%">
                    <tr style="width:100%"></tr></thead>
                    <tbody id="queue-elements-body" class="list-group" style="width:100%;"></tbody>
                </table>
                <script data-jui="#queue-list-elements" data-tpl="row" type="text/template">
                    <tr class="list-group-item" style="width:100%; margin:0; padding:0; height:50px" data-track-id=<!= id !>>
                        <td  style="width:100%; margin:0; padding:0">
                            <div class="element">
                                <img class="cover-image" src="<!= cover !>" height='50' width='50' draggable=false></img>
                                <div style="margin:0px; padding:0px; float:left; width:275px">
                                    <div class="queue_element_title"><b><!= title !></b></div>
                                    <div class="queue_element_artist"><i><!= artist !></i></div>
                                </div>
                                <div class="queue_element_bpm"><!= bpm !> BPM</div>
                                <div class="queue_element_duration">
                                    <b><!= duration !></b>
                                </div>
                            </div>
                        </td>
                    </tr>
                </script>
            </div>        
        </div>
    </div>
    <div class="footer">
        <div class="content">
            <div  class="item">
                <span style="font-size:10pt; color:rgb(150,150,150)"><b>ENDS:</b></span> <span style="font-size:10pt; color:rgb(225,225,225)">3:45:56</span>
            </div>        
            <div id="queue-stop-message" class="item" style="visibility:hidden">
                <b>Queue will stop after this song</b>
            </div>
            <div  class="item">
                <span style="font-size:10pt; color:rgb(200,200,200)">2018-03-02</span> <span style="font-size:10pt; color:rgb(225,225,225)"></span>| <b>3:45:56</b></span>
            </div>            
        </div>
    </div>

    <script>
        var acc = document.getElementsByClassName("accordion");
        var i;
        for (i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var panel = this.nextElementSibling;
                if (panel.style.maxHeight) {
                    panel.style.maxHeight = null;
                } else {
                    panel.style.maxHeight = panel.scrollHeight + "px";
                } 
            });
        }
    </script>

<script src="drag_and_drop.js"></script>
<script src="main_window.js"></script>
</body>
