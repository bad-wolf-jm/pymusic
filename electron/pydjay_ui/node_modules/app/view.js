const { ApplicationWindow } = require("ui/dom/window")
const { Label } = require("ui/dom/label.js")
const { BoxLayout } = require("ui/layout/box")
const { LayoutPlaceholder } = require("ui/layout/placeholder")


const { AudioOutputDetector } = require('webaudio/detect')
const { TrackListAreaController } = require('app/views/track_list_area')
const { QueueAreaController } = require('app/views/queue_list_area')
const { PymusicAppController } = require('app/controller')
const { Sidebar } = require("app/views/sidebar")
const { MainPlayerView } = require("app/views/header_main_player")




class DJApplicationWindow extends ApplicationWindow {
    constructor() {
        super()
        let h = new Label("Hello World")
        let mainLayout = new BoxLayout("vertical")
        let headerSpace = new MainPlayerView(MDB.tracks)
        headerSpace.set_controller(AppController)
        headerSpace.init()



        this.mainListSpace = new BoxLayout('vertical')
        this.mainListView = new TrackListAreaController(this.mainListSpace.domElement, MDB)
        this.sidebarSpace = new Sidebar(this.mainListView, MDB)
        this.mainListSpace.append(this.mainListView, true, true)



        this.queueListSpace = new BoxLayout('vertical')
        let queueListView = new QueueAreaController(this.queueListSpace.domElement, MDB)
        queueListView.hide_playlist_editor()
        queueListView.queue_view.displayModel("QUEUE", MDB.queue)

        this.queueListSpace.append(queueListView, true, true)

        let mainSpaceLayout = new BoxLayout("horizontal")
        mainSpaceLayout.append(this.sidebarSpace, false, true, 350)
        mainSpaceLayout.append(this.mainListSpace, true, true)
        mainSpaceLayout.append(this.queueListSpace, false, true, 400)

        let footerSpace = new LayoutPlaceholder("footer", "rgb(142,34,45)")

        mainLayout.append(headerSpace, false, true, 85)
        mainLayout.append(mainSpaceLayout, true, true)
        mainLayout.append(footerSpace, false, true, 35)
               
        this.setLayout(mainLayout)

    }
}

module.exports = {
    DJApplicationWindow: DJApplicationWindow
}