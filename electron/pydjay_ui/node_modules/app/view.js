const { ApplicationWindow } = require("ui/dom/window")
const { Label } = require("ui/dom/label.js")
const { BoxLayout } = require("ui/layout/box")
const { LayoutPlaceholder } = require("ui/layout/placeholder")


const { AudioOutputDetector } = require('webaudio/detect')
const { TrackListAreaController } = require('app/views/track_list_area')
const { QueueAreaController } = require('app/views/queue_list_area')
const { PymusicAppController } = require('app/controller')
const { Sidebar } = require("app/views/sidebar")
const { MainPlayerView } = require("app/views/header_main_player")




class DJApplicationWindow extends ApplicationWindow {
    constructor() {
        super()
        let h = new Label("Hello World")
        let mainLayout = new BoxLayout("vertical")
        let headerSpace = new MainPlayerView(MDB.tracks)
        headerSpace.set_controller(AppController)
        headerSpace.init()



        let mainListSpace = new BoxLayout('vertical')
        let mainListView = new TrackListAreaController(mainListSpace.domElement, MDB)
        let sidebarSpace = new Sidebar(mainListView, MDB)
        mainListSpace.append(mainListView, true, true)



        let queueListSpace = new BoxLayout('vertical')
        let queueListView = new QueueAreaController(queueListSpace.domElement, MDB)
        queueListView.hide_playlist_editor()
        queueListView.queue_view.displayModel("QUEUE", MDB.queue)

        queueListSpace.append(queueListView, true, true)

        let mainSpaceLayout = new BoxLayout("horizontal")
        mainSpaceLayout.append(sidebarSpace, false, true, 350)
        mainSpaceLayout.append(mainListSpace, true, true)
        mainSpaceLayout.append(queueListSpace, false, true, 400)

        let footerSpace = new LayoutPlaceholder("footer", "rgb(142,34,45)")

        mainLayout.append(headerSpace, false, true, 85)
        mainLayout.append(mainSpaceLayout, true, true)
        mainLayout.append(footerSpace, false, true, 35)
               
        this.setLayout(mainLayout)

    }
}

module.exports = {
    DJApplicationWindow: DJApplicationWindow
}