
const { DOMElement } = require("ui/dom/domelement.js")
const { Dialog } = require("./dialog.js")
const { ConfirmButton, DismissButton } = require("./buttons.js")
const { BoxLayout } = require("ui/layout/box")

class InputDialog extends Dialog {
    constructor (config) {
        super()
        this._config = config

        this.input_area = new BoxLayout("vertical", {padding: 0})
        this.layout = new BoxLayout("vertical", {left:20, right:20, top:20, bottom:20, padding:20})
        // this.layout.setStyle({
        //     position: "absolute",
        //     top: '0px',
        //     width: "100%",
        //     height: "100%"
        // })
        // this.input_area.setStyle({
        //     position: "absolute",
        //     top: '0px',
        //     width: "100%",
        //     height: "100%"
        // })
        this.setTitle(this._config.title)
        this._confirm_button = new ConfirmButton()
        this._confirm_button.setText(config.confirmText || "confirm")

        this._dismiss_button = new DismissButton()
        this._dismiss_button.setText(config.dismissText || "dismiss")
        // d = new DOMElement("div")
        // d.setStyle({width:"100%", height:"50px"})

        let button_layout = new BoxLayout("horizontal", {padding: 30})
        button_layout.append(this._confirm_button, true, true)
        button_layout.append(this._dismiss_button, true, true)

        this.layout.append(this.input_area, true, true)
        this.layout.append(button_layout, false, true, 40)

        this.appendChildren([this.layout])

        this._confirm_button.on("click", () => {
            if (this._config.confirmAction != undefined) {
                this._config.confirmAction(this)
            }
        })

        this._dismiss_button.on("click", () => {
            if (this._config.dismissAction != undefined) {
                this._config.dismissAction(this)
            }
        })
    }
}

module.exports = {
    InputDialog: InputDialog
}
