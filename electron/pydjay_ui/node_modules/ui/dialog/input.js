
const { DOMElement } = require("ui/dom/domelement.js")
const { Dialog } = require("./dialog.js")
const { ConfirmButton, DismissButton } = require("./buttons.js")

class InputDialog extends Dialog {
    constructor (config) {
        super()
        this._config = config

        this.input_area = new DOMElement("div")
        this.input_area.setStyle({
            width:"100%"
        })

        this._confirm_button = new ConfirmButton()
        this._confirm_button.setStyle({width:"calc(50% - 16px)"})
        this._confirm_button.setText(config.confirmText || "confirm")

        this._dismiss_button = new DismissButton()
        this._dismiss_button.setText(config.dismissText || "dismiss")
        this._dismiss_button.setStyle({width:"calc(50% - 16px)"})

        d = new DOMElement("div")
        d.setStyle({width:"100%", height:"50px"})

        let button_area = new DOMElement("div")
        button_area.setStyle({
            width:"55%",
            height: "50px",
            left:"25%",
            position:"relative"})
        button_area.appendChildren([this._confirm_button, this._dismiss_button])

        d.appendChild(button_area)

        this.appendChildren([this.input_area, d])

        this._confirm_button.on("click", () => {
            if (this._config.confirmAction != undefined) {
                this._config.confirmAction(this)
            }
        })

        this._dismiss_button.on("click", () => {
            if (this._config.dismissAction != undefined) {
                this._config.dismissAction(this)
            }
        })
    }
}

module.exports = {
    InputDialog: InputDialog
}
