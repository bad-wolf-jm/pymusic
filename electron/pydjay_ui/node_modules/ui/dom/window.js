const { EventDispatcher } = require("notify/event_dispatcher.js")
const fs = require("fs-extra")
const path = require('path');


class ApplicationWindow extends EventDispatcher {
    constructor() {
        super()

        let uiDirName = path.dirname(__dirname)
        this.addStyleFile(`${uiDirName}/css/icons.css`)
        this.addStyleFile(`${uiDirName}/css/style.css`)
        this.addStyleFile(`${uiDirName}/css/button.css`)
        this.addStyleFile(`${uiDirName}/css/propertysheet.css`)
        this.addStyleFile(`${uiDirName}/css/text_input.css`)
        this.addStyleFile(`${uiDirName}/css/listview.css`)
        this.addStyleFile(`${uiDirName}/css/accordion.css`)
        this.addStyleFile(`${uiDirName}/css/dropdownmenu.css`)
    }

    addStyleFile(fileName) {
        let css = fs.readFileSync(fileName, 'utf8');
        let style = document.createElement('style');
        let head = document.getElementsByTagName('head')[0]

        head.appendChild(style);
        style.type = 'text/css';
        style.appendChild(document.createTextNode(css));
    }

    setLayout(c) {
        let body = document.getElementsByTagName("body")[0]
        body.appendChild(c.domElement)
    }
}

module.exports = {
    ApplicationWindow: ApplicationWindow
}