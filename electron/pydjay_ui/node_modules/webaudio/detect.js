

class AudioOutputDetector {
    constructor() {

    }

    async detectAutioOutputs() {
        let media_devices = await navigator.mediaDevices.enumerateDevices()
        let output_devices = []
        media_devices.forEach((d) => {
            if ((d.kind == 'audiooutput') && (d.deviceId != "default")) {
                output_devices.push(d)
            }
        })
        return output_devices
    }

    async getAudioOutputDevices() {
        let output_dict = {}
        let audio_outputs = await this.detectAutioOutputs()
        audio_outputs.forEach((o) => {
            output_dict[o.deviceId] = o.label
        })
        return output_dict
    }
}

module.exports = {
    AudioOutputDetector: AudioOutputDetector
}